"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[587],{587:(e,s,t)=>{t.r(s),t.d(s,{default:()=>a});var l=t(43),c=t(579);const r=e=>{let{msg:s,user:t,setReplyTo:l}=e;const r=s.user===t;return(0,c.jsxs)("div",{className:"message ".concat(r?"me":"other"," ").concat(s.type),children:[s.reply_context&&(0,c.jsxs)("div",{className:"message-reply-context",onClick:()=>{},children:[(0,c.jsx)("div",{className:"reply-line"}),(0,c.jsxs)("div",{className:"reply-content",children:[(0,c.jsx)("div",{className:"reply-author",children:"Replying to message"}),(0,c.jsx)("div",{className:"reply-text",children:"text"===s.reply_context.type?s.reply_context.msg:"[".concat(s.reply_context.type,"]")})]})]}),(0,c.jsx)("div",{className:"msg-content-wrapper",children:(()=>{switch(s.type){case"image":return(0,c.jsx)("img",{src:s.msg,alt:"attachment",className:"msg-image"});case"video":return(0,c.jsx)("video",{src:s.msg,controls:!0,className:"msg-video"});case"audio":return(0,c.jsx)("audio",{src:s.msg,controls:!0,className:"msg-audio"});case"file":const e=s.msg.split("/").pop().split("_").slice(2).join("_");return(0,c.jsxs)("a",{href:s.msg,target:"_blank",rel:"noopener noreferrer",className:"msg-file",children:["\ud83d\udcc4 ",e||"Download File"]});default:return(0,c.jsx)("div",{className:"msg-text",children:s.msg})}})()}),(0,c.jsx)("div",{className:"msg-time",children:new Date(1e3*s.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),(0,c.jsx)("button",{className:"reply-btn",onClick:()=>l(s),title:"Reply",children:"\u21a9"})]})},a=e=>{let{messages:s,user:t,setReplyTo:a,onLoadMore:n}=e;const i=(0,l.useRef)(null),o=(0,l.useRef)(null),[m,d]=(0,l.useState)(!0),[p,u]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{m&&o.current&&o.current.scrollIntoView({behavior:"smooth"})},[s,m]),(0,c.jsxs)("div",{className:"chat-window",ref:i,onScroll:()=>{if(i.current){const{scrollTop:e,scrollHeight:t,clientHeight:l}=i.current;if(d(t-e-l<100),e<50&&!p&&s.length>0){u(!0);const e=s[0];e&&n&&n(e.timestamp).finally(()=>{u(!1)})}}},children:[p&&(0,c.jsx)("div",{className:"loading-history",children:"Loading history..."}),s.map((e,s)=>(0,c.jsx)(r,{msg:e,user:t,setReplyTo:a},e.id||"".concat(e.timestamp,"-").concat(s))),(0,c.jsx)("div",{ref:o,className:"chat-spacer"})]})}}}]);
//# sourceMappingURL=587.5c79efb2.chunk.js.map